(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const fe="modulepreload",ae=function(e){return"/"+e},X={},de=function(t,n,r){if(!n||n.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=ae(s),s in X)return;X[s]=!0;const l=s.endsWith(".css"),a=l?'[rel="stylesheet"]':"";if(!!r)for(let h=o.length-1;h>=0;h--){const f=o[h];if(f.href===s&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const i=document.createElement("link");if(i.rel=l?"stylesheet":fe,l||(i.as="script",i.crossOrigin=""),i.href=s,document.head.appendChild(i),l)return new Promise((h,f)=>{i.addEventListener("load",h),i.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s})};function x(){}function ie(e){return e()}function Z(){return Object.create(null)}function M(e){e.forEach(ie)}function le(e){return typeof e=="function"}function ce(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function he(e){return Object.keys(e).length===0}function pe(e,...t){if(e==null)return x;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function me(e,t,n){e.$$.on_destroy.push(pe(t,n))}function d(e,t){e.appendChild(t)}function I(e,t,n){e.insertBefore(t,n||null)}function L(e){e.parentNode&&e.parentNode.removeChild(e)}function _e(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function q(e){return document.createTextNode(e)}function $(){return q(" ")}function W(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function ee(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ge(e){return Array.from(e.childNodes)}function G(e,t){t=""+t,e.data!==t&&(e.data=t)}function te(e,t){e.value=t??""}let K;function z(e){K=e}function be(){if(!K)throw new Error("Function called outside component initialization");return K}function ye(e){be().$$.on_mount.push(e)}const B=[],ne=[];let D=[];const re=[],we=Promise.resolve();let J=!1;function Ee(){J||(J=!0,we.then(ue))}function H(e){D.push(e)}const Y=new Set;let F=0;function ue(){if(F!==0)return;const e=K;do{try{for(;F<B.length;){const t=B[F];F++,z(t),$e(t.$$)}}catch(t){throw B.length=0,F=0,t}for(z(null),B.length=0,F=0;ne.length;)ne.pop()();for(let t=0;t<D.length;t+=1){const n=D[t];Y.has(n)||(Y.add(n),n())}D.length=0}while(B.length);for(;re.length;)re.pop()();J=!1,Y.clear(),z(e)}function $e(e){if(e.fragment!==null){e.update(),M(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(H)}}function ke(e){const t=[],n=[];D.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),D=t}const Pe=new Set;function xe(e,t){e&&e.i&&(Pe.delete(e),e.i(t))}function Ce(e,t,n,r){const{fragment:o,after_update:s}=e.$$;o&&o.m(t,n),r||H(()=>{const l=e.$$.on_mount.map(ie).filter(le);e.$$.on_destroy?e.$$.on_destroy.push(...l):M(l),e.$$.on_mount=[]}),s.forEach(H)}function Oe(e,t){const n=e.$$;n.fragment!==null&&(ke(n.after_update),M(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function je(e,t){e.$$.dirty[0]===-1&&(B.push(e),Ee(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ve(e,t,n,r,o,s,l,a=[-1]){const p=K;z(e);const i=e.$$={fragment:null,ctx:[],props:s,update:x,not_equal:o,bound:Z(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(p?p.$$.context:[])),callbacks:Z(),dirty:a,skip_bound:!1,root:t.target||p.$$.root};l&&l(i.root);let h=!1;if(i.ctx=n?n(e,t.props||{},(f,C,...k)=>{const O=k.length?k[0]:C;return i.ctx&&o(i.ctx[f],i.ctx[f]=O)&&(!i.skip_bound&&i.bound[f]&&i.bound[f](O),h&&je(e,f)),C}):[],i.update(),h=!0,M(i.before_update),i.fragment=r?r(i.ctx):!1,t.target){if(t.hydrate){const f=ge(t.target);i.fragment&&i.fragment.l(f),f.forEach(L)}else i.fragment&&i.fragment.c();t.intro&&xe(e.$$.fragment),Ce(e,t.target,t.anchor,t.customElement),ue()}z(p)}class Ae{$destroy(){Oe(this,1),this.$destroy=x}$on(t,n){if(!le(n))return x;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!he(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const T=[];function Le(e,t=x){let n;const r=new Set;function o(a){if(ce(e,a)&&(e=a,n)){const p=!T.length;for(const i of r)i[1](),T.push(i,e);if(p){for(let i=0;i<T.length;i+=2)T[i][0](T[i+1]);T.length=0}}}function s(a){o(a(e))}function l(a,p=x){const i=[a,p];return r.add(i),r.size===1&&(n=t(o)||x),a(e),()=>{r.delete(i),r.size===0&&n&&(n(),n=null)}}return{set:o,update:s,subscribe:l}}function oe(e,t,n){const r=e.slice();return r[15]=t[n],r}function se(e){let t,n=e[15]+"",r,o,s,l,a,p;function i(){return e[9](e[15])}return{c(){t=g("li"),r=q(n),o=$(),s=g("button"),s.textContent="삭제",l=$()},m(h,f){I(h,t,f),d(t,r),d(t,o),d(t,s),d(t,l),a||(p=W(s,"click",i),a=!0)},p(h,f){e=h,f&8&&n!==(n=e[15]+"")&&G(r,n)},d(h){h&&L(t),a=!1,p()}}}function Se(e){let t,n,r,o,s,l,a,p,i,h,f,C,k,O,b,R,U,u,P,y,S,w,V,j,N,v,A=e[3],m=[];for(let c=0;c<A.length;c+=1)m[c]=se(oe(e,A,c));return{c(){t=g("h1"),t.textContent="보험 문서 챗봇 검색 시스템",n=$(),r=g("div"),o=g("h2"),o.textContent="PDF 파일 관리",s=$(),l=g("input"),a=$(),p=g("p"),i=q(e[0]),h=$(),f=g("h3"),f.textContent="로드된 파일 목록",C=$(),k=g("ul");for(let c=0;c<m.length;c+=1)m[c].c();O=$(),b=g("div"),R=g("h2"),R.textContent="챗봇",U=$(),u=g("textarea"),P=$(),y=g("button"),y.textContent="질문하기",S=$(),w=g("p"),V=q("답변: "),j=q(e[2]),ee(l,"type","file"),l.multiple=!0,ee(u,"placeholder","궁금한 점을 물어보세요")},m(c,E){I(c,t,E),I(c,n,E),I(c,r,E),d(r,o),d(r,s),d(r,l),d(r,a),d(r,p),d(p,i),d(r,h),d(r,f),d(r,C),d(r,k);for(let _=0;_<m.length;_+=1)m[_]&&m[_].m(k,null);I(c,O,E),I(c,b,E),d(b,R),d(b,U),d(b,u),te(u,e[1]),d(b,P),d(b,y),d(b,S),d(b,w),d(w,V),d(w,j),N||(v=[W(l,"change",e[8]),W(u,"input",e[10]),W(y,"click",e[7])],N=!0)},p(c,[E]){if(E&1&&G(i,c[0]),E&72){A=c[3];let _;for(_=0;_<A.length;_+=1){const Q=oe(c,A,_);m[_]?m[_].p(Q,E):(m[_]=se(Q),m[_].c(),m[_].m(k,null))}for(;_<m.length;_+=1)m[_].d(1);m.length=A.length}E&2&&te(u,c[1]),E&4&&G(j,c[2])},i:x,o:x,d(c){c&&L(t),c&&L(n),c&&L(r),_e(m,c),c&&L(O),c&&L(b),N=!1,M(v)}}}function Ne(e,t,n){let r,o={},s=Le([]);me(e,s,u=>n(3,r=u));let l="",a="",p="";const i={}.VITE_OPENAI_API_KEY;let h;ye(async()=>{try{h=await de(()=>import("./pdf-1b172346.js"),[]),h.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${h.version}/pdf.worker.min.js`}catch(u){n(0,l=`PDF.js 라이브러리를 로드하는 중 오류 발생: ${u.message}`)}});async function f(u){n(0,l="파일을 처리하는 중입니다...");for(const P of u){const y=new FileReader;y.onload=async S=>{const w=P.name,V=S.target.result;if(o[w])n(0,l="이미 업로드된 파일입니다.");else try{const j=await h.getDocument({data:V}).promise;let N="";for(let v=0;v<j.numPages;v++){const m=await(await j.getPage(v+1)).getTextContent();N+=m.items.map(c=>c.str).join(" ")+`
`}o[w]={content:N,filename:w},s.update(v=>[...v,w]),n(0,l=`성공적으로 처리된 파일: ${w}`)}catch(j){n(0,l=`Error processing ${w}: ${j.message}`)}},y.readAsArrayBuffer(P)}}function C(u){o[u]?(delete o[u],s.update(P=>P.filter(y=>y!==u)),n(0,l=`${u} 파일이 삭제되었습니다.`)):n(0,l=`${u} 파일을 찾을 수 없습니다.`)}function k(){return Object.values(o).map(u=>u.content).join(`

=====

`)}async function O(){const u=k();if(!u){n(2,p="먼저 PDF 파일을 업로드해주세요.");return}const P=`다음 PDF 문서들의 내용을 바탕으로 질문에 답변해주세요:

${u}

질문: ${a}`;try{const S=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:P}]})})).json();n(2,p=S.choices[0].message.content)}catch(y){n(2,p=`Error: ${y.message}`)}}const b=u=>f(u.target.files),R=u=>C(u);function U(){a=this.value,n(1,a)}return[l,a,p,r,s,f,C,O,b,R,U]}class Fe extends Ae{constructor(t){super(),ve(this,t,Ne,Se,ce,{})}}new Fe({target:document.getElementById("app")});export{de as _};
